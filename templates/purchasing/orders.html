{% extends "base.html" %}
{% block title %}Purchase Orders{% endblock %}
{% block content %}
<h3 class="fw-bold text-primary mb-3">
  <i class="bi bi-cart-check me-2"></i>Purchase Orders
</h3>

<form method="post" class="card shadow-sm border-0 p-3 mb-4">
  {{ csrf_token() }}
  <div class="row g-3 align-items-end">
    <div class="col-md-3">
      <label class="form-label fw-semibold">Supplier</label>
      <input type="text" name="supplier" class="form-control" required>
    </div>
    <div class="col-md-3">
      <label class="form-label fw-semibold">Item</label>
      <input type="text" name="item" class="form-control" required>
    </div>
    <div class="col-md-2">
      <label class="form-label fw-semibold">Qty</label>
      <input type="number" name="quantity" min="1" class="form-control" required>
    </div>
    <div class="col-md-2">
      <label class="form-label fw-semibold">Harga (Rp)</label>
      <input type="number" name="price" step="0.01" class="form-control" required>
    </div>
    <div class="col-md-2 text-end">
      <button type="submit" class="btn btn-sm btn-primary mt-3 px-3">
        <i class="bi bi-plus-circle"></i> Tambah
      </button>
    </div>
  </div>
</form>

<div class="card p-3 shadow-sm border-0">
  <table class="table table-hover align-middle text-center mb-0">
    <thead class="table-primary">
      <tr>
        <th>No PO</th><th>Supplier</th><th>Item</th><th>Qty</th><th>Harga (Rp)</th><th>Status</th><th>Tanggal</th>
      </tr>
    </thead>
    <tbody>
      {% for o in orders %}
      <tr>
        <td>{{ o.po }}</td>
        <td>{{ o.supplier }}</td>
        <td>{{ o.item }}</td>
        <td>{{ o.qty }}</td>
        <td class="text-end">{{ "{:,.0f}".format(o.price) }}</td>
        <td>
          {% if o.status == "Approved" %}
            <span class="badge bg-success">{{ o.status }}</span>
          {% elif o.status == "Draft" %}
            <span class="badge bg-warning text-dark">{{ o.status }}</span>
          {% else %}
            <span class="badge bg-secondary">{{ o.status }}</span>
          {% endif %}
        </td>
        <td>{{ o.date }}</td>
      </tr>
      {% else %}
      <tr><td colspan="7" class="text-muted">Belum ada Purchase Order.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}